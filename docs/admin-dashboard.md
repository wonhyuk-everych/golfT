# 관리자 대시보드 문서

## 📊 개요
골프 예약 시스템의 관리자 대시보드는 전체 시스템 현황을 한눈에 파악할 수 있는 통합 관리 화면입니다.

## 🎯 주요 기능

### 1. 핵심 지표 (KPI) 카드
- **총 회원 수**: 활성 회원 수와 이번 달 신규 가입자 수
- **총 상품 수**: 골프장, 호텔, 캐디 상품 개수
- **이번 달 예약**: 월별 예약 건수와 전체 예약 현황
- **이번 달 매출**: 월별 매출과 누적 매출

### 2. 시각화 차트
- **월별 매출 추이**: 최근 6개월 매출 트렌드 (라인 차트)
- **예약 타입별 분포**: 골프/호텔/캐디/대회 예약 비율 (도넛 차트)
- **지역별 예약 현황**: TOP 5 인기 지역 (바 차트)
- **일별 신규 회원**: 최근 7일간 신규 가입 추이 (영역 차트)

### 3. 관리 업무 섹션
- **승인 대기 예약**: 관리자 승인이 필요한 예약 목록
- **미답변 QnA**: 답변이 필요한 고객 문의사항
- **최근 리뷰**: 새로 등록된 고객 리뷰

## 🗂️ 파일 구조

```
pages/admin/dashboard/
├── index.vue                    # 메인 대시보드 페이지

components/admin/
├── DashboardCard.vue           # 상단 요약 카드 컴포넌트
├── RevenueChart.vue           # 매출 추이 차트
├── ReservationTypeChart.vue   # 예약 타입 분포 차트
├── RegionChart.vue            # 지역별 현황 차트
└── NewMembersChart.vue        # 신규 회원 차트

server/api/admin/dashboard/
└── index.get.js               # 대시보드 데이터 API

layouts/
└── admin.vue                  # 관리자 레이아웃

middleware/
└── admin-auth.js              # 관리자 인증 미들웨어
```

## 🔧 기술 스택

### Frontend
- **Nuxt 3**: Vue.js 기반 풀스택 프레임워크
- **Tailwind CSS**: 유틸리티 퍼스트 CSS 프레임워크
- **Chart.js**: 데이터 시각화 라이브러리

### Backend
- **MySQL**: 관계형 데이터베이스
- **mysql2**: Node.js MySQL 드라이버

## 📈 데이터베이스 쿼리 최적화

### 주요 쿼리 패턴
1. **집계 쿼리**: COUNT, SUM을 활용한 통계 데이터
2. **날짜 필터링**: DATE_FORMAT을 활용한 월별/일별 그룹핑
3. **조인 쿼리**: 지역별 통계를 위한 테이블 조인
4. **정렬 및 제한**: TOP N 데이터 조회

### 성능 최적화 방안
- 병렬 쿼리 실행으로 응답 시간 단축
- 인덱스 활용을 위한 WHERE 절 최적화
- 필요한 컬럼만 SELECT하여 데이터 전송량 최소화

## 🚀 설치 및 실행

### 1. 의존성 설치
```bash
npm install chart.js
```

### 2. 환경변수 설정
```env
# .env 파일
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=golf_db
```

### 3. 데이터베이스 설정
- `server/sql/script.sql` 파일을 실행하여 테이블 생성
- 필요한 인덱스가 자동으로 생성됨

### 4. 개발 서버 실행
```bash
npm run dev
```

## 🔐 보안 고려사항

### 인증 및 권한
- JWT 토큰 기반 관리자 인증
- 관리자 등급(grade='A') 확인
- 토큰 만료 시간 검증

### 데이터 보호
- SQL 인젝션 방지를 위한 Prepared Statement 사용
- 민감한 정보 마스킹 처리
- HTTPS 통신 권장

## 📱 반응형 디자인

### 브레이크포인트
- **모바일**: < 768px
- **태블릿**: 768px - 1024px  
- **데스크톱**: > 1024px

### 모바일 최적화
- 햄버거 메뉴를 통한 사이드바 토글
- 카드 레이아웃 자동 조정
- 터치 친화적 인터페이스

## 🔄 실시간 업데이트

### 데이터 갱신 주기
- 페이지 로드 시 최신 데이터 조회
- 필요시 수동 새로고침 기능 추가 가능
- WebSocket을 통한 실시간 업데이트 확장 가능

## 📊 추가 개선 사항

### 단기 개선
1. **필터링 기능**: 날짜 범위, 지역별 필터
2. **엑셀 내보내기**: 통계 데이터 다운로드
3. **알림 시스템**: 중요 이벤트 푸시 알림

### 장기 개선
1. **고급 분석**: 예측 분석, 트렌드 분석
2. **커스텀 대시보드**: 사용자 정의 위젯
3. **모바일 앱**: 네이티브 관리자 앱

## 🐛 트러블슈팅

### 자주 발생하는 문제
1. **차트 렌더링 오류**: Chart.js 버전 호환성 확인
2. **데이터베이스 연결 실패**: 환경변수 설정 확인
3. **권한 오류**: 관리자 토큰 유효성 검증

### 디버깅 방법
- 브라우저 개발자 도구 콘솔 확인
- 서버 로그 모니터링
- API 응답 상태 코드 확인

## 📞 지원

문제가 발생하거나 개선 사항이 있으면 개발팀에 문의해주세요.

---

*마지막 업데이트: 2025년 1월*